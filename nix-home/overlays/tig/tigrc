# Settings
set main-view-author-display = email-user
set main-view-date-display = relative

# Bindings

# branch
bind refs n !@git branch "%(prompt Enter branch name: )"
bind main <C-n> !@git branch "%(prompt Enter branch name: )" %(commit)

#Fetch
bind generic <Ctrl-f> ?git fetch -p %(remote)
bind main    <Ctrl-f> ?git fetch -p %(remote)

# reset
bind main   H ?git reset --hard %(commit)
bind diff   H ?git reset --hard %(commit)
bind refs   H ?git reset --hard %(branch)
bind status H ?git reset --hard HEAD

# rebase
bind refs <Ctrl-R> ?git rebase %(branch)

# rebase interactive
bind main B ?git rebase -i %(branch)
bind main <Ctrl-B> ?git rebase -i %(commit)
bind refs B ?git rebase -i %(branch)

# push
bind generic P ?git push -u %(remote) %(repo:head)
bind status P ?git push -u %(remote) %(repo:head)
bind main   w !?git push -f %(remote) %(repo:head)
bind status w !?git push -f %(remote) %(repo:head)

# pull
bind main <Ctrl-p> ?git pull --ff-only

# commit
bind status a ?git commit --amend
bind status + ?git commit --amend --allow-empty

# revert commit
bind main ! !?git revert %(commit)

# chunk under cursor on diff (stage or unstage)
bind stage 1 stage-update-line

# tag the selected commit
bind main T !?@git tag %(prompt) %(commit)

# add current file to gitignore
bind status <Ctrl-r> ?sh -c "echo %(file) >> .gitignore"

# copy sha to clipboard
bind generic 9 !sh -c "echo -n %(commit) | xclip -selection c && echo Copied %(commit) to clipboard"

# COLORS

# Try to mimic gitk's colors.

color date      default default
color delimiter default default # ~ if text is too long

# Main window.
color cursor         black   cyan         # currently selected line
color author         default default
color graph-commit   magenta default      # commit dots in graph
color main-head      green   default bold # HEAD
color main-ref       green   default      # branches
color main-remote    yellow  default      # remote branches
color main-tag       yellow  default bold # tags
color main-local-tag yellow  default bold # local tags (normal tags)

# Information at the top of the commit diff.
color commit                default default
color "Author: "            default default
color "Commit: "            default default
color pp-merge              default default
color "Date: "              default default
color "AuthorDate: "        default default
color "CommitDate: "        default default
color pp-refs               default default
# Special parts of the commit message.
color "    Signed-off-by"   default default
color "    Acked-by"        default default

# Diff coloring.
color diff-header default default bold # diff --git a/.. b/..
color diff-index  default default bold # index abc..def
color diff-chunk  cyan    default      # @@ -.. +.. @@

# refresh
set refresh-mode = true
set refresh-interval = 5
